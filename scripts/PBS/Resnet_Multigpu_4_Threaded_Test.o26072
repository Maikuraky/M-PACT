------------------------------------------------------
Job is running on node lgn1
lgn1
lgn1
lgn1
lgn1
------------------------------------------------------
PBS_ARRAYID :
PBS_ENVIRONMENT : PBS_BATCH
PBS_GPUFILE : /var/spool/torque/aux//26072.blindspotgpu
PBS_JOBCOOKIE : 194CC53F559318BCAAB06BF52A690478
PBS_JOBID : 26072.blindspot
PBS_JOBNAME : Resnet_Multigpu_4_Threaded_Test
PBS_MOMPORT : 15003
PBS_NODEFILE : /var/spool/torque/aux//26072.blindspot
PBS_NODENUM : 0
PBS_NP : 5
PBS_NUM_NODES : 1
PBS_NUM_PPN : 5
PBS_O_HOME : /home/madantrg
PBS_O_HOST : hyaloidcanal
PBS_O_LANG : en_US.UTF-8
PBS_O_LOGNAME : madantrg
PBS_O_PATH : /z/sw/bin/:/z/sw/sbin/:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/snap/bin
PBS_O_SHELL : /bin/bash
PBS_O_WORKDIR : /z/home/madantrg/tf-activity-recognition-framework/scripts/PBS
PBS_QUEUE : batch
PBS_TASKNUM : 1
The contents of gpu file are:
lgn1-gpu3
lgn1-gpu2
lgn1-gpu1
lgn1-gpu0
----------End of GPU file------
I got allocated the following gpus
gpu: 3
gpu: 2
gpu: 1
gpu: 0
PBS: qsub is running on hyaloidcanal
PBS: originating queue is batch
PBS: executing queue is batch
PBS: working directory is /z/home/madantrg/tf-activity-recognition-framework/scripts/PBS
PBS: execution mode is PBS_BATCH
PBS: job identifier is 26072.blindspot
PBS: job name is Resnet_Multigpu_4_Threaded_Test
PBS: node file is /var/spool/torque/aux//26072.blindspot
PBS: current home directory is /home/madantrg
PBS: PATH = /z/sw/bin/:/z/sw/sbin/:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/snap/bin
------------------------------------------------------
start
lgn1
Wed Nov  8 20:13:05 2017       
+-----------------------------------------------------------------------------+
| NVIDIA-SMI 384.66                 Driver Version: 384.66                    |
|-------------------------------+----------------------+----------------------+
| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |
| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |
|===============================+======================+======================|
|   0  GeForce GTX TIT...  Off  | 00000000:02:00.0 Off |                  N/A |
| 22%   58C    P0    76W / 250W |      0MiB / 12206MiB |      0%      Default |
+-------------------------------+----------------------+----------------------+
|   1  GeForce GTX TIT...  Off  | 00000000:03:00.0 Off |                  N/A |
| 22%   61C    P0    76W / 250W |      0MiB / 12207MiB |      0%      Default |
+-------------------------------+----------------------+----------------------+
|   2  GeForce GTX TIT...  Off  | 00000000:82:00.0 Off |                  N/A |
| 22%   60C    P0    74W / 250W |      0MiB / 12207MiB |      0%      Default |
+-------------------------------+----------------------+----------------------+
|   3  GeForce GTX TIT...  Off  | 00000000:83:00.0 Off |                  N/A |
| 22%   60C    P0    66W / 250W |      0MiB / 12207MiB |      2%      Default |
+-------------------------------+----------------------+----------------------+
                                                                               
+-----------------------------------------------------------------------------+
| Processes:                                                       GPU Memory |
|  GPU       PID  Type  Process name                               Usage      |
|=============================================================================|
|  No running processes found                                                 |
+-----------------------------------------------------------------------------+
Train Resnet : 4 GPU threaded test
2017-11-08 20:13:56.044779: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-11-08 20:13:56.044828: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-11-08 20:13:56.044853: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-11-08 20:13:56.044864: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-11-08 20:13:56.044873: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-11-08 20:13:58.698218: I tensorflow/core/common_runtime/gpu/gpu_device.cc:940] Found device 0 with properties: 
name: GeForce GTX TITAN X
major: 5 minor: 2 memoryClockRate (GHz) 1.076
pciBusID 0000:83:00.0
Total memory: 11.92GiB
Free memory: 11.81GiB
2017-11-08 20:13:59.015924: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0x17fa4240 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.
2017-11-08 20:13:59.017581: I tensorflow/core/common_runtime/gpu/gpu_device.cc:940] Found device 1 with properties: 
name: GeForce GTX TITAN X
major: 5 minor: 2 memoryClockRate (GHz) 1.076
pciBusID 0000:82:00.0
Total memory: 11.92GiB
Free memory: 11.81GiB
2017-11-08 20:13:59.348606: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0x17f9fdb0 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.
2017-11-08 20:13:59.350090: I tensorflow/core/common_runtime/gpu/gpu_device.cc:940] Found device 2 with properties: 
name: GeForce GTX TITAN X
major: 5 minor: 2 memoryClockRate (GHz) 1.076
pciBusID 0000:03:00.0
Total memory: 11.92GiB
Free memory: 11.81GiB
2017-11-08 20:13:59.707031: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0x17f9b920 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.
2017-11-08 20:13:59.708733: I tensorflow/core/common_runtime/gpu/gpu_device.cc:940] Found device 3 with properties: 
name: GeForce GTX TITAN X
major: 5 minor: 2 memoryClockRate (GHz) 1.076
pciBusID 0000:02:00.0
Total memory: 11.92GiB
Free memory: 11.81GiB
2017-11-08 20:13:59.709143: I tensorflow/core/common_runtime/gpu/gpu_device.cc:832] Peer access not supported between device ordinals 0 and 2
2017-11-08 20:13:59.709171: I tensorflow/core/common_runtime/gpu/gpu_device.cc:832] Peer access not supported between device ordinals 0 and 3
2017-11-08 20:13:59.709220: I tensorflow/core/common_runtime/gpu/gpu_device.cc:832] Peer access not supported between device ordinals 1 and 2
2017-11-08 20:13:59.709238: I tensorflow/core/common_runtime/gpu/gpu_device.cc:832] Peer access not supported between device ordinals 1 and 3
2017-11-08 20:13:59.709256: I tensorflow/core/common_runtime/gpu/gpu_device.cc:832] Peer access not supported between device ordinals 2 and 0
2017-11-08 20:13:59.709272: I tensorflow/core/common_runtime/gpu/gpu_device.cc:832] Peer access not supported between device ordinals 2 and 1
2017-11-08 20:13:59.709534: I tensorflow/core/common_runtime/gpu/gpu_device.cc:832] Peer access not supported between device ordinals 3 and 0
2017-11-08 20:13:59.709556: I tensorflow/core/common_runtime/gpu/gpu_device.cc:832] Peer access not supported between device ordinals 3 and 1
2017-11-08 20:13:59.709684: I tensorflow/core/common_runtime/gpu/gpu_device.cc:961] DMA: 0 1 2 3 
2017-11-08 20:13:59.709697: I tensorflow/core/common_runtime/gpu/gpu_device.cc:971] 0:   Y Y N N 
2017-11-08 20:13:59.709706: I tensorflow/core/common_runtime/gpu/gpu_device.cc:971] 1:   Y Y N N 
2017-11-08 20:13:59.709715: I tensorflow/core/common_runtime/gpu/gpu_device.cc:971] 2:   N N Y Y 
2017-11-08 20:13:59.709723: I tensorflow/core/common_runtime/gpu/gpu_device.cc:971] 3:   N N Y Y 
2017-11-08 20:13:59.709740: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Creating TensorFlow device (/gpu:0) -> (device: 0, name: GeForce GTX TITAN X, pci bus id: 0000:83:00.0)
2017-11-08 20:13:59.709778: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Creating TensorFlow device (/gpu:1) -> (device: 1, name: GeForce GTX TITAN X, pci bus id: 0000:82:00.0)
2017-11-08 20:13:59.709790: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Creating TensorFlow device (/gpu:2) -> (device: 2, name: GeForce GTX TITAN X, pci bus id: 0000:03:00.0)
2017-11-08 20:13:59.709798: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Creating TensorFlow device (/gpu:3) -> (device: 3, name: GeForce GTX TITAN X, pci bus id: 0000:02:00.0)
Setup of current experiments:  Namespace(baseDataPath='/z/home/madantrg/Datasets', dataset='HMDB51', expName='resnet_multigpu_4_threaded_test', fName='trainlist', inputDims=50, load=0, lr=0.001, model='resnet', nEpochs=1, numGpus=4, numVids=27, outputDims=51, saveFreq=1, seqLength=50, size=224, split=1, train=1, valFreq=1, wd=0.0)
resnet initialized
Generating RESNET network layers
Generating RESNET network layers
Generating RESNET network layers
Generating RESNET network layers
27
Saving...
10
Tot load time:   8.5074763298
Tot train time:  12.1109642982
Tot time:        34.2100989819
end
