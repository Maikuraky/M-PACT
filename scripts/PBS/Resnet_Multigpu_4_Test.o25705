------------------------------------------------------
Job is running on node lgn4
------------------------------------------------------
PBS_ARRAYID :
PBS_ENVIRONMENT : PBS_BATCH
PBS_GPUFILE : /var/spool/torque/aux//25705.blindspotgpu
PBS_JOBCOOKIE : F6F9177A824C3D7ABAFBD8532FF2DF11
PBS_JOBID : 25705.blindspot
PBS_JOBNAME : Resnet_Multigpu_4_Test
PBS_MOMPORT : 15003
PBS_NODEFILE : /var/spool/torque/aux//25705.blindspot
PBS_NODENUM : 0
PBS_NP : 1
PBS_NUM_NODES : 1
PBS_NUM_PPN : 1
PBS_O_HOME : /home/madantrg
PBS_O_HOST : hyaloidcanal
PBS_O_LANG : en_US.UTF-8
PBS_O_LOGNAME : madantrg
PBS_O_PATH : /z/sw/bin/:/z/sw/sbin/:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/snap/bin
PBS_O_SHELL : /bin/bash
PBS_O_WORKDIR : /z/home/madantrg/tf-activity-recognition-framework/scripts/PBS
PBS_QUEUE : batch
PBS_TASKNUM : 1
The contents of gpu file are:
lgn4-gpu3
lgn4-gpu2
lgn4-gpu1
lgn4-gpu0
----------End of GPU file------
I got allocated the following gpus
gpu: 3
gpu: 2
gpu: 1
gpu: 0
PBS: qsub is running on hyaloidcanal
PBS: originating queue is batch
PBS: executing queue is batch
PBS: working directory is /z/home/madantrg/tf-activity-recognition-framework/scripts/PBS
PBS: execution mode is PBS_BATCH
PBS: job identifier is 25705.blindspot
PBS: job name is Resnet_Multigpu_4_Test
PBS: node file is /var/spool/torque/aux//25705.blindspot
PBS: current home directory is /home/madantrg
PBS: PATH = /z/sw/bin/:/z/sw/sbin/:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/snap/bin
------------------------------------------------------
start
lgn4
Sun Nov  5 19:00:12 2017       
+-----------------------------------------------------------------------------+
| NVIDIA-SMI 384.90                 Driver Version: 384.90                    |
|-------------------------------+----------------------+----------------------+
| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |
| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |
|===============================+======================+======================|
|   0  TITAN Xp            On   | 00000000:02:00.0 Off |                  N/A |
| 40%   65C    P0    89W / 250W |      2MiB / 12189MiB |     49%      Default |
+-------------------------------+----------------------+----------------------+
|   1  TITAN Xp            On   | 00000000:03:00.0 Off |                  N/A |
| 23%   36C    P8    17W / 250W |      2MiB / 12189MiB |      0%      Default |
+-------------------------------+----------------------+----------------------+
|   2  TITAN Xp            On   | 00000000:82:00.0 Off |                  N/A |
| 23%   39C    P8    17W / 250W |      2MiB / 12189MiB |      0%      Default |
+-------------------------------+----------------------+----------------------+
|   3  TITAN Xp            On   | 00000000:83:00.0 Off |                  N/A |
| 23%   35C    P8    19W / 250W |      2MiB / 12189MiB |      0%      Default |
+-------------------------------+----------------------+----------------------+
                                                                               
+-----------------------------------------------------------------------------+
| Processes:                                                       GPU Memory |
|  GPU       PID   Type   Process name                             Usage      |
|=============================================================================|
|  No running processes found                                                 |
+-----------------------------------------------------------------------------+
Train Resnet : 4 GPU test
2017-11-05 19:00:47.059260: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-11-05 19:00:47.059325: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-11-05 19:00:47.059353: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-11-05 19:00:47.059364: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-11-05 19:00:47.059374: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-11-05 19:00:48.762543: I tensorflow/core/common_runtime/gpu/gpu_device.cc:940] Found device 0 with properties: 
name: TITAN Xp
major: 6 minor: 1 memoryClockRate (GHz) 1.911
pciBusID 0000:83:00.0
Total memory: 11.90GiB
Free memory: 11.74GiB
2017-11-05 19:00:49.106822: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0x17b5f1c0 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.
2017-11-05 19:00:49.108530: I tensorflow/core/common_runtime/gpu/gpu_device.cc:940] Found device 1 with properties: 
name: TITAN Xp
major: 6 minor: 1 memoryClockRate (GHz) 1.911
pciBusID 0000:82:00.0
Total memory: 11.90GiB
Free memory: 11.74GiB
2017-11-05 19:00:49.448290: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0x17b5ac70 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.
2017-11-05 19:00:49.449066: I tensorflow/core/common_runtime/gpu/gpu_device.cc:940] Found device 2 with properties: 
name: TITAN Xp
major: 6 minor: 1 memoryClockRate (GHz) 1.911
pciBusID 0000:03:00.0
Total memory: 11.90GiB
Free memory: 11.74GiB
2017-11-05 19:00:49.801546: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0x17b56720 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.
2017-11-05 19:00:49.802312: I tensorflow/core/common_runtime/gpu/gpu_device.cc:940] Found device 3 with properties: 
name: TITAN Xp
major: 6 minor: 1 memoryClockRate (GHz) 1.911
pciBusID 0000:02:00.0
Total memory: 11.90GiB
Free memory: 11.73GiB
2017-11-05 19:00:49.803004: I tensorflow/core/common_runtime/gpu/gpu_device.cc:832] Peer access not supported between device ordinals 0 and 2
2017-11-05 19:00:49.803018: I tensorflow/core/common_runtime/gpu/gpu_device.cc:832] Peer access not supported between device ordinals 0 and 3
2017-11-05 19:00:49.803051: I tensorflow/core/common_runtime/gpu/gpu_device.cc:832] Peer access not supported between device ordinals 1 and 2
2017-11-05 19:00:49.803061: I tensorflow/core/common_runtime/gpu/gpu_device.cc:832] Peer access not supported between device ordinals 1 and 3
2017-11-05 19:00:49.803069: I tensorflow/core/common_runtime/gpu/gpu_device.cc:832] Peer access not supported between device ordinals 2 and 0
2017-11-05 19:00:49.803076: I tensorflow/core/common_runtime/gpu/gpu_device.cc:832] Peer access not supported between device ordinals 2 and 1
2017-11-05 19:00:49.803685: I tensorflow/core/common_runtime/gpu/gpu_device.cc:832] Peer access not supported between device ordinals 3 and 0
2017-11-05 19:00:49.803697: I tensorflow/core/common_runtime/gpu/gpu_device.cc:832] Peer access not supported between device ordinals 3 and 1
2017-11-05 19:00:49.803750: I tensorflow/core/common_runtime/gpu/gpu_device.cc:961] DMA: 0 1 2 3 
2017-11-05 19:00:49.803757: I tensorflow/core/common_runtime/gpu/gpu_device.cc:971] 0:   Y Y N N 
2017-11-05 19:00:49.803761: I tensorflow/core/common_runtime/gpu/gpu_device.cc:971] 1:   Y Y N N 
2017-11-05 19:00:49.803765: I tensorflow/core/common_runtime/gpu/gpu_device.cc:971] 2:   N N Y Y 
2017-11-05 19:00:49.803769: I tensorflow/core/common_runtime/gpu/gpu_device.cc:971] 3:   N N Y Y 
2017-11-05 19:00:49.803778: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Creating TensorFlow device (/gpu:0) -> (device: 0, name: TITAN Xp, pci bus id: 0000:83:00.0)
2017-11-05 19:00:49.803792: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Creating TensorFlow device (/gpu:1) -> (device: 1, name: TITAN Xp, pci bus id: 0000:82:00.0)
2017-11-05 19:00:49.803796: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Creating TensorFlow device (/gpu:2) -> (device: 2, name: TITAN Xp, pci bus id: 0000:03:00.0)
2017-11-05 19:00:49.803800: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Creating TensorFlow device (/gpu:3) -> (device: 3, name: TITAN Xp, pci bus id: 0000:02:00.0)
Setup of current experiments:  Namespace(baseDataPath='/z/home/madantrg/Datasets', dataset='HMDB51', expName='resnet_multigpu_test', fName='trainlist', inputDims=50, load=0, lr=0.001, model='resnet', nEpochs=1, numGpus=4, numVids=3570, outputDims=51, saveFreq=1, seqLength=50, size=224, split=1, train=1, valFreq=1, wd=0.0)
resnet initialized
Generating RESNET network layers
Generating RESNET network layers
Generating RESNET network layers
Generating RESNET network layers
Saving...
validation acc:  0.00420673076923
Tot load time:  2204.5927093
Tot train time:  494.710518837
Tot time:  6707.81323981
end
